try{self["workbox:window:7.2.0"]&&_()}catch(a){}function E(a,b){return new Promise(function(d){var c=new MessageChannel;c.port1.onmessage=function(a){d(a.data)},a.postMessage(b,[c.port2])})}function W(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var d=a[Symbol.toPrimitive];if(void 0!==d){var c=d.call(a,b);if("object"!=typeof c)return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return a+""}(a,"string");return"symbol"==typeof b?b:b+""}function k(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,W(c.key),c)}function P(a,b){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){return a.__proto__=b,a},P(a,b)}function j(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function L(a,b){var c="u">typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(c)return(c=c.call(a)).next.bind(c);if(Array.isArray(a)||(c=function(a,b){if(a){if("string"==typeof a)return j(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?j(a,b):void 0}}(a))||b){c&&(a=c);var d=0;return function(){return d>=a.length?{done:!0}:{done:!1,value:a[d++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}try{self["workbox:core:7.2.0"]&&_()}catch(a){}var w=function(){var a=this;this.promise=new Promise(function(b,c){a.resolve=b,a.reject=c})};function b(a,b){var c=location.href;return new URL(a,c).href===new URL(b,c).href}var g=function(a,b){this.type=a,Object.assign(this,b)};function d(a,b,c){return c?b?b(a):a:(a&&a.then||(a=Promise.resolve(a)),b?a.then(b):a)}function O(){}var x={type:"SKIP_WAITING"};function S(a){return a&&a.then?a.then(O):Promise.resolve()}var U=function(a){function e(c,f){var h,i;return void 0===f&&(f={}),(h=a.call(this)||this).nn={},h.tn=0,h.rn=new w,h.en=new w,h.on=new w,h.un=0,h.an=new Set,h.cn=function(){var c=h.fn,d=c.installing;0<h.tn||!b(d.scriptURL,h.sn.toString())||performance.now()>h.un+6e4?(h.vn=d,c.removeEventListener("updatefound",h.cn)):(h.hn=d,h.an.add(d),h.rn.resolve(d)),++h.tn,d.addEventListener("statechange",h.ln)},h.ln=function(b){var c=h.fn,a=b.target,d=a.state,e=a===h.vn,f={sw:a,isExternal:e,originalEvent:b};!e&&h.mn&&(f.isUpdate=!0),h.dispatchEvent(new g(d,f)),"installed"===d?h.wn=self.setTimeout(function(){"installed"===d&&c.waiting===a&&h.dispatchEvent(new g("waiting",f))},200):"activating"===d&&(clearTimeout(h.wn),e||h.en.resolve(a))},h.yn=function(b){var c=h.hn,a=c!==navigator.serviceWorker.controller;h.dispatchEvent(new g("controlling",{isExternal:a,originalEvent:b,sw:c,isUpdate:h.mn})),a||h.on.resolve(c)},h.gn=(i=function(b){var c=b.data,a=b.ports,e=b.source;return d(h.getSW(),function(){h.an.has(e)&&h.dispatchEvent(new g("message",{data:c,originalEvent:b,ports:a,sw:e}))})},function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];try{return Promise.resolve(i.apply(this,b))}catch(a){return Promise.reject(a)}}),h.sn=c,h.nn=f,navigator.serviceWorker.addEventListener("message",h.gn),h}var f,j;j=a,(f=e).prototype=Object.create(j.prototype),f.prototype.constructor=f,P(f,j);var m,n,o=e.prototype;return o.register=function(a){var c=(void 0===a?{}:a).immediate;try{var e=this;return d(function(b,c){var a=b();return a&&a.then?a.then(c):c(a)}(function(){if(!(void 0!==c&&c)&&"complete"!==document.readyState)return S(new Promise(function(a){return window.addEventListener("load",a)}))},function(){return e.mn=!!navigator.serviceWorker.controller,e.dn=e.pn(),d(e.bn(),function(c){e.fn=c,e.dn&&(e.hn=e.dn,e.en.resolve(e.dn),e.on.resolve(e.dn),e.dn.addEventListener("statechange",e.ln,{once:!0}));var d=e.fn.waiting;return d&&b(d.scriptURL,e.sn.toString())&&(e.hn=d,Promise.resolve().then(function(){e.dispatchEvent(new g("waiting",{sw:d,wasWaitingBeforeRegister:!0}))}).then(function(){})),e.hn&&(e.rn.resolve(e.hn),e.an.add(e.hn)),e.fn.addEventListener("updatefound",e.cn),navigator.serviceWorker.addEventListener("controllerchange",e.yn),e.fn})}))}catch(a){return Promise.reject(a)}},o.update=function(){try{return this.fn?d(S(this.fn.update())):d()}catch(a){return Promise.reject(a)}},o.getSW=function(){return void 0===this.hn?this.rn.promise:Promise.resolve(this.hn)},o.messageSW=function(a){try{return d(this.getSW(),function(b){return E(b,a)})}catch(a){return Promise.reject(a)}},o.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&E(this.fn.waiting,x)},o.pn=function(){var a=navigator.serviceWorker.controller;return a&&b(a.scriptURL,this.sn.toString())?a:void 0},o.bn=function(){try{var a=this;return d(function(a,b){try{var c=a()}catch(a){return b(a)}return c&&c.then?c.then(void 0,b):c}(function(){return d(navigator.serviceWorker.register(a.sn,a.nn),function(b){return a.un=performance.now(),b})},function(a){throw a}))}catch(a){return Promise.reject(a)}},m=e,(n=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&k(m.prototype,n),Object.defineProperty(m,"prototype",{writable:!1}),m}(function(){function a(){this.Pn=new Map}var b=a.prototype;return b.addEventListener=function(a,b){this.jn(a).add(b)},b.removeEventListener=function(a,b){this.jn(a).delete(b)},b.dispatchEvent=function(a){a.target=this;for(var b,d=L(this.jn(a.type));!(b=d()).done;)(0,b.value)(a)},b.jn=function(a){return this.Pn.has(a)||this.Pn.set(a,new Set),this.Pn.get(a)},a}());export{U as Workbox,g as WorkboxEvent,E as messageSW};